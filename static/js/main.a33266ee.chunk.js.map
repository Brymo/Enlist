{"version":3,"sources":["Components/FactionChoice.js","Components/Footer.js","Components/Equipment.js","Components/Unit.js","Components/Main.js","App.js","serviceWorker.js","index.js"],"names":["Option","Select","FactionChoice","useContext","Context","factionData","currentFaction","factionList","factionSetter","style","minWidth","width","value","onChange","selection","clone","console","log","showSearch","map","faction","key","Bottom","styled","div","Spacer","AddButton","Footer","props","army","useLayoutEffect","setTimeout","dataToSave","localStorage","setItem","JSON","stringify","total","reduce","acc","unit","onClick","addItem","Strip","span","Equipment","equipment","selfDestruct","changeQuantity","className","qty","min","name","points","size","shape","type","icon","CloseOutlined","UnitBox","Row","CloseRow","Unit","initialData","dispatch","useState","model","weapons","unitData","setData","currentEquip","setCurrent","units","useMemo","concat","updateUnit","newUnit","old","new","weapon","parseInt","useEffect","startingWeapon","startingWeaponPoints","firstModelPoints","genModData","field","val","changeCurrentEquip","useCallback","split","pointsTxt","chosenEquip","genRemoveWeapon","equipClone","index","findIndex","wep","withoutIndex","filter","w","i","chosenModel","step","e","currentClone","id","DeleteOutlined","Top","Main","setUnits","idCount","setIdCount","data","existingList","parse","getItem","init","forEach","push","length","unitToRemove","newList","newItem","React","createContext","All","reducer","action","removeUnit","toRemove","firstInstanceRemoved","isKept","weaponsOnRemoved","weaponsOnUnit","weaponOnRemoved","find","weaponOnUnit","App","useReducer","factions","setFactions","fetch","then","v","json","factionKeys","Object","keys","Provider","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.a33266ee.chunk.js","sourcesContent":["import React,{useState,useContext} from 'react';\nimport {Context} from \"../App\";\nimport {Select} from \"antd\";\nconst {Option} = Select;\n\nexport default function FactionChoice(){\n\n    const {currentFaction,factionList,factionSetter} = useContext(Context).factionData;\n\n    function setFaction(selection){\n        const clone = {currentFaction:selection, factionList:[...factionList], factionSetter};\n        clone.currentFaction = selection;\n        console.log(clone);\n        factionSetter(clone);\n    }\n\n    return(\n        <div style={{minWidth:\"10rem\", width:\"20%\"}}>\n            <Select value={currentFaction} style={{minWidth:\"10rem\", width:\"100%\"}} onChange={setFaction} showSearch>\n                {factionList.map((faction)=>{\n                    return (<Option key={faction} value={faction}>\n                    {faction}\n                    </Option>)\n                })}\n            </Select>\n        </div>\n    )\n\n}","import React, { useLayoutEffect } from 'react';\nimport {useContext} from 'react';\nimport styled from \"styled-components\";\nimport {Context} from \"../App\";\nimport FactionChooser from './FactionChoice'\n\nconst Bottom = styled.div`\n\n    grid-row: 2/span 1;\n\n    width:100%;\n    height: 5rem;\n    display:flex;\n    justify-content:space-between;\n    align-items: center;\n    border-top: 1px solid grey ;\n    padding: 0 2.5rem;\n    font-size: 2.5rem;\n    font-weight:bold;\n\n    @media (max-width: 768px){\n        justify-content:flex-start;\n        font-size: 1rem;\n    }\n\n` \n\nconst Spacer = styled.div`\n    margin-left:1rem;\n`\n\nconst AddButton = styled.div`\n    width: 50vw;\n    background-color: #1890ff;\n    margin: -2.5rem;\n    padding-left: 2.5rem;\n    height:5rem;\n    display:flex;\n    align-items:center;\n    cursor: pointer;\n    transition: padding-left 0.2s ease-out;\n\n    &:hover{\n        padding-left: 2.8rem;\n    }\n\n    @media (max-width: 768px){\n        position:absolute;\n        right:0;\n        padding-left: 0rem;\n        margin: 0rem;\n        width: 20vw;\n        display:flex;\n        justify-content:center;\n        align-items:center;\n    }\n\n`\n\nexport default function Footer(props){\n  \n    const {army,factionData} = useContext(Context);\n\n    useLayoutEffect(()=>{\n        setTimeout(()=>{\n            const clone = [...army];\n            const dataToSave = {army:clone, faction: factionData.currentFaction};\n            console.log(dataToSave);\n            localStorage.setItem(\"ENLIST_ARMY_LIST\", JSON.stringify(dataToSave));\n        },0);\n    },[army,factionData])\n\n\n    const total = army.reduce((acc,unit)=>{\n        return acc + unit.total;\n    },0);\n\n   return (\n        <Bottom>\n            {`Total: ${total}pts`}\n            <Spacer><FactionChooser/></Spacer>\n            <AddButton onClick={()=>{props.addItem()}}>Add + </AddButton>\n        </Bottom>\n   ) \n}","import React from 'react';\nimport \"./component.css\"\nimport {Button,InputNumber} from 'antd';\nimport {CloseOutlined} from \"@ant-design/icons\";\nimport styled from \"styled-components\";\n\nconst Strip = styled.span`\n    background-color: lightgray;\n    width:100%;\n    margin: 0.25rem;\n    padding:0.5rem;\n\n    font-weight:bold;\n    display:flex;\n    justify-content:space-between;\n` \n\nexport default function Equipment(props){\n\n    const {equipment,selfDestruct,changeQuantity} = props;\n\n    return (\n        <Strip className=\"strip\">\n            <InputNumber value={equipment.qty} min={0} onChange={changeQuantity}/>\n            {`${equipment.name} - ${equipment.points}`}\n            <Button className=\"showOnHover\" size=\"small\" shape=\"circle\" type=\"danger\" icon={<CloseOutlined/>} onClick={selfDestruct}/>\n        </Strip>\n    )\n\n}\n\n\n","import React, { useState, useContext,useLayoutEffect,useEffect, useMemo, useCallback } from \"react\";\nimport styled from \"styled-components\"\nimport {DeleteOutlined} from \"@ant-design/icons\";\nimport {Context} from \"../App\";\nimport Equipment from './Equipment';\nimport {InputNumber, Select,Button} from \"antd\";\nconst {Option} = Select;\n\nconst UnitBox = styled.div`\n    width: 25rem;\n    min-height:13rem;\n    border-radius:1.25rem;\n    box-shadow: 0 0.1rem 0.2rem 0.2rem lightgrey;\n    padding:1.25rem;\n\n    display:flex;\n    flex-direction: column;\n    align-items:center;\n    justify-content:space-between;\n\n    margin:0.5rem;\n\n    @media (max-width: 768px){\n        width:90vw;\n    }\n`;\n\nconst Row=  styled.span`\n    display:flex;\n    justify-content:space-between;\n    align-items:center;\n    width:100%;\n    font-size: 2.5rem;\n    font-weight:bold;\n`;\n\nconst CloseRow=  styled.span`\n    display:flex;\n    justify-content:flex-start;\n    align-items:center;\n    width:100%;\n    font-size: 2.5rem;\n    font-weight:bold;\n`;\n\nexport default function Unit(props){\n    const {selfDestruct,factionData, initialData} = props;\n    const allData = useContext(Context)\n    const {dispatch } = allData;\n    const [unitData, setData] = useState({qty:1, model:{name:\"\",points:0}, weapons:[],total:0});\n    const [currentEquip,setCurrent] = useState({name:\"\", points:0});\n    //const [unitData, setData] = useState({qty:0, name:data[currentFaction][\"UNITS\"][0].name, weapons:[]});\n\n    const units = useMemo(()=>factionData[\"UNITS\"].concat(factionData[\"NAMED CHARS\"] || []),[factionData])\n    const equipment = useMemo(()=>factionData[\"RANGED WEAPONS\"].concat(factionData[\"MELEE WEAPONS\"]).concat(factionData[\"OTHER WARGEAR\"]),[factionData])\n\n    const weaponPoints =  unitData.weapons.reduce((acc,weapon)=>{\n        return acc + parseInt(weapon.points)*weapon.qty;\n    },0);\n\n    function updateUnit(newUnit){\n        dispatch({type:\"update\",old:unitData,new:newUnit})\n        setData(newUnit);\n    }\n\n    const total = (weaponPoints + unitData.model.points)*unitData.qty;\n\n    useEffect(()=>{\n        const clone = {...unitData};\n        clone.total = total;\n        updateUnit(clone);\n    },[total]);\n\n\n    useEffect(()=>{\n        if(initialData){\n            updateUnit(initialData)\n            const startingWeapon = initialData.weapons[0] ? initialData.weapons[0].name : equipment[0].name;\n            const startingWeaponPoints = initialData.weapons[0] ? initialData.weapons[0].name : equipment[0].name;\n            setCurrent({name:startingWeapon,points:startingWeaponPoints});    \n        }else{\n            const firstModelPoints = parseInt(units[0].points);\n            updateUnit({qty:1, model:{name:units[0].name,points:firstModelPoints}, weapons:[],total:firstModelPoints});    \n            setCurrent({name:equipment[0].name,points:equipment[0].points});    \n        }\n    },[factionData]);\n\n\n\n    const genModData = (field)=>{\n        return (val)=>{\n            const clone = {...unitData};\n            clone[field] = val;\n            updateUnit(clone);\n        }\n    }\n\n    //where model is format name$$points because idk how to do this otherwise\n    const changeModel = (model)=>{\n        const [name,pointsTxt] = model.split(\"$$\");\n        const chosenModel = {name,points:parseInt(pointsTxt)}\n        genModData(\"model\")(chosenModel);\n    }\n\n    const changeCurrentEquip = useCallback((model)=>{\n        const [name,pointsTxt] = model.split(\"$$\");\n        const chosenEquip = {name,points:parseInt(pointsTxt)}\n        setCurrent(chosenEquip);\n    },[])\n\n    const addCurrentToWeapons = ()=>{\n       const clone = {...unitData};\n       const equipClone = [...clone.weapons];\n       const index = clone.weapons.findIndex((wep)=>wep.name === currentEquip.name);\n\n       if(index != -1){\n           //increment the old strip\n           equipClone[index].qty = equipClone[index].qty + 1;\n           clone.weapons = equipClone;\n       }else{\n           //create a new weapon strip\n           const currentClone = {...currentEquip, qty:1};\n           clone.weapons = equipClone.concat([currentClone]);\n       }\n\n       updateUnit(clone);\n    }\n\n\n    const genRemoveWeapon = (name)=>{\n        return ()=>{\n            const clone = {...unitData}\n            const equipClone = [...clone.weapons];\n            const index = equipClone.findIndex((wep)=>wep.name === name);\n\n            const withoutIndex = equipClone.filter((w,i)=>{\n                return i != index;\n            })\n\n            clone.weapons = withoutIndex;\n            updateUnit(clone);\n        }\n    }\n\n    function changeWeaponQty(name){\n        return (qty)=>{\n            const clone = {...unitData}\n            const equipClone = [...clone.weapons];\n            \n            const index = equipClone.findIndex((wep)=>{return wep.name === name});\n            \n            if(index != -1){\n                equipClone[index].qty = qty;            \n                clone.weapons = equipClone;\n                updateUnit(clone);\n            }\n        }\n    }\n\n    return (\n        <div className=\"unitCard\">\n        <UnitBox>\n           <CloseRow>\n               <Select value={unitData.model.name} style={{width:\"50%\"}} onChange={changeModel} showSearch>\n                   {units.map((unit)=>{\n                       return (<Option key={unit.name} value={`${unit.name}$$${unit.points}`} >\n                        {`${unit.name} - ${unit.points}`}\n                       </Option>)\n                   })}\n               </Select>\n               <InputNumber  value={unitData.qty} min={0} step={1} onChange={genModData(\"qty\")}/>\n           </CloseRow> \n           <CloseRow>\n               <Select value={currentEquip.name} style={{width:\"50%\"}} onChange={changeCurrentEquip} showSearch>\n                   {equipment.map((e)=>{\n                       return (<Option key={e.name} value={`${e.name}$$${e.points}`} >\n                        {`${e.name} - ${e.points}`}\n                       </Option>)\n                   })}\n               </Select>\n               <Button type=\"primary\" onClick={addCurrentToWeapons}>Add</Button>\n           </CloseRow>\n           {unitData.weapons.map((weapon)=>{\n               return <Equipment id={weapon.name} equipment={weapon} changeQuantity={changeWeaponQty(weapon.name)} selfDestruct={genRemoveWeapon(weapon.name)}/>\n           })}\n           <Row>\n                {`${total}pts`}\n                <Button className=\"showOnHover\" shape=\"circle\" type=\"danger\" icon={<DeleteOutlined/>} size=\"large\" onClick={()=>{selfDestruct(unitData)}}/> \n           </Row>\n        </UnitBox>\n        </div>\n    )\n}","import React, { useCallback, useEffect,useLayoutEffect } from 'react';\nimport {useState,useContext} from 'react';\nimport styled from 'styled-components';\nimport {Button} from 'antd';\nimport {PlusOutlined} from \"@ant-design/icons\";\nimport {Context} from \"../App\"\nimport Footer from \"./Footer\";\nimport Unit from \"./Unit\";\nimport { existsSync } from 'fs';\n\n\nconst Top = styled.div`\n    grid-row: 1/span 1;\n    background-color: white;\n    width:100%;\n    max-height: 100%;\n    position:relative;\n    padding: 2.5rem;\n\n    display:flex;\n    justify-content:flex-start;\n    align-items:flex-start;\n    flex-wrap:wrap;\n    overflow:auto;\n    \n    @media (max-width: 768px){\n        padding:1rem;\n    }\n`\n\nconst AddButton = styled.div`\n    position: absolute;\n    right:2.5rem;\n    bottom:2.5rem;\n`\n\nexport default function Main(){\n\n    const [units,setUnits] = useState([]);\n    const [idCount,setIdCount] = useState(1);\n    const {data,factionData,dispatch} = useContext(Context);\n\n    const addItem = (unit)=>{\n        setIdCount(idCount+1);\n        const newItem = {id:idCount,initialData:unit};\n        setUnits([...units, newItem]);\n    }\n    //load this component with the data it last had when closed\n    useLayoutEffect(()=>{\n        const existingList = JSON.parse(localStorage.getItem(\"ENLIST_ARMY_LIST\")); \n        if(existingList.army){\n            const init = [];\n            existingList.army.forEach((unit,i)=>{\n                init.push({id:i, initialData:unit});\n            });\n            setUnits(init);\n            setIdCount(existingList.army.length+1);\n        }\n    },[])\n\n\n    const genDestroyItem = (id)=>{\n        return (unitToRemove)=>{\n            const newList = units.filter(unit=>unit.id !== id);\n            setUnits(newList);\n            dispatch({type:\"remove\", old:unitToRemove})\n        }\n    }\n\n        //const {dispatch} = Total;\n        //dispatch({type:\"add\", value:1});\n\n    const currentFaction = factionData.currentFaction || factionData.factionList[0];\n\n    return (\n        <>\n            <Top>\n                {data && data[currentFaction] && units.map((unit)=>{\n                    console.log(unit.id);\n                    return <Unit key={unit.id} initialData={unit.initialData} selfDestruct={genDestroyItem(unit.id)} factionData={data[currentFaction]}/>\n                })}\n            </Top>\n            <Footer addItem={addItem}/>\n        </>\n    )  \n}","import React,{useState,useEffect,useReducer} from 'react';\nimport './App.css';\nimport Main from \"./Components/Main\";\nimport styled from 'styled-components';\nimport { array } from 'prop-types';\n\nconst Context = React.createContext();\n\nconst All = styled.div`\n  width:100%;\n  height: 99.9vh;\n  display: grid;\n  grid-template-rows: 1fr 5rem;\n  grid-template-columns: 1fr;\n`\n\nconst reducer = function(army,action){\n\n  function removeUnit(toRemove){\n    let firstInstanceRemoved = false;\n    return army.filter((unit)=>{\n      if(firstInstanceRemoved){return true};\n      let isKept = true;\n      if(unit.qty === toRemove.qty && toRemove.model.name === unit.model.name){\n        const weaponsOnRemoved = toRemove.weapons;\n        const weaponsOnUnit = unit.weapons;\n        if(weaponsOnRemoved.length == weaponsOnUnit.length){\n          const diffWeapons = weaponsOnRemoved.filter(weaponOnRemoved=>{\n            return !weaponsOnUnit.find(weaponOnUnit=>weaponOnUnit.name === weaponOnRemoved.name);\n          });\n          \n          if(diffWeapons.length === 0){\n            isKept = false;\n          }\n\n        }\n      }\n      if(!isKept){firstInstanceRemoved = true};\n      return isKept;\n    })\n  }\n\n\n  const toRemove = action.old;\n  switch(action.type){\n    case \"update\":\n      return removeUnit(toRemove).concat(action.new);\n      break;\n    case \"remove\": \n      //deep comparison on qty, model, weapons\n      return removeUnit(toRemove); \n      break;\n  }\n  return \"error\";\n}\n\nfunction App() {\n\n  const [data,setData] = useState({});\n  const [army,dispatch] = useReducer(reducer,[]);\n  const [factions,setFactions] = useState({currentFaction: \"\", factionList:[]});\n\n\n  useEffect(()=>{\n    const existingList = JSON.parse(localStorage.getItem(\"ENLIST_ARMY_LIST\")); \n    console.log(existingList);\n    fetch('https://raw.githubusercontent.com/Brymo/Enlist/master/public/Data.json').then(v=>v.json()).then(data=>{\n      console.log(data);\n      setData(data);\n      const factionKeys = Object.keys(data); \n      setFactions({currentFaction:existingList.faction || factionKeys[0], factionList:factionKeys, factionSetter:setFactions});\n    });\n  },[])\n  \n\n  return (\n    <>\n      <Context.Provider value={{data,factionData:factions,army, dispatch }}>\n        <All>\n          <Main/>\n        </All>\n      </Context.Provider>\n    </>\n  );\n}\n\nexport default App;\nexport {Context};\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}