(this.webpackJsonpenlist=this.webpackJsonpenlist||[]).push([[0],{103:function(e,n,t){},104:function(e,n,t){},139:function(e,n,t){},143:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),i=t(12),c=t.n(i),o=(t(103),t(13)),l=t(10),u=(t(104),t(20)),s=t(11),m=t(144),f=m.a.Option;function d(){var e=Object(a.useContext)(U).factionData,n=e.currentFaction,t=e.factionList,i=e.factionSetter;return r.a.createElement("div",{style:{minWidth:"10rem",width:"20%"}},r.a.createElement(m.a,{value:n,style:{minWidth:"10rem",width:"100%"},onChange:function(e){var n={currentFaction:e,factionList:Object(u.a)(t),factionSetter:i};n.currentFaction=e,console.log(n),i(n)},showSearch:!0},t.map((function(e){return r.a.createElement(f,{key:e,value:e},e)}))))}function p(){var e=Object(l.a)(["\n    width: 50vw;\n    background-color: #1890ff;\n    margin: -2.5rem;\n    padding-left: 2.5rem;\n    height:5rem;\n    display:flex;\n    align-items:center;\n    cursor: pointer;\n    transition: padding-left 0.2s ease-out;\n\n    &:hover{\n        padding-left: 2.8rem;\n    }\n\n    @media (max-width: 950px){\n        position:absolute;\n        right:0;\n        padding-left: 0rem;\n        margin: 0rem;\n        width: 20vw;\n        display:flex;\n        justify-content:center;\n        align-items:center;\n    }\n\n"]);return p=function(){return e},e}function h(){var e=Object(l.a)(["\n    margin-left:1rem;\n"]);return h=function(){return e},e}function v(){var e=Object(l.a)(["\n\n    grid-row: 3/span 1;\n\n    width:100%;\n    height: 5rem;\n    display:flex;\n    justify-content:space-between;\n    align-items: center;\n    border-top: 1px solid grey ;\n    padding: 0 2.5rem;\n    font-size: 2.5rem;\n    font-weight:bold;\n\n    @media (max-width: 950px){\n        justify-content:flex-start;\n        font-size: 1rem;\n    }\n\n"]);return v=function(){return e},e}var b=s.a.div(v()),g=s.a.div(h()),w=s.a.div(p());function y(e){var n=Object(a.useContext)(U),t=n.army,i=n.factionData;Object(a.useLayoutEffect)((function(){setTimeout((function(){var e={army:Object(u.a)(t),faction:i.currentFaction};console.log(e),localStorage.setItem("ENLIST_ARMY_LIST",JSON.stringify(e))}),0)}),[t,i]);var c=t.reduce((function(e,n){return e+n.total}),0);return r.a.createElement(b,null,"Total: ".concat(c,"pts"),r.a.createElement(g,null,r.a.createElement(d,null)),r.a.createElement(w,{onClick:function(){e.addItem()}},"Add + "))}var j=t(149),E=t(148),O=t(146),x=t(152);function S(){var e=Object(l.a)(["\n    position:absolute;\n    left:3rem;\n    font-size:1rem;\n\n"]);return S=function(){return e},e}function C(){var e=Object(l.a)(["\n  grid-row: 1 / span 1;\n\n  width: 100%;\n  height: 3rem;\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  padding: 0 2.5rem;\n  font-size: 2.5rem;\n  font-weight: bold;\n  box-shadow: 0 0.1rem 0.1rem 0.1rem lightgrey;\n\n  @media (max-width: 950px) {\n    font-size: 1rem;\n  }\n"]);return C=function(){return e},e}var k=s.a.div(C()),I=s.a.div(S());function D(e){var n=Object(a.useContext)(U).army,t=Object(a.useState)(!1),i=Object(o.a)(t,2),c=i[0],l=i[1];n.reduce((function(e,n){return e+n.total}),0);var u=Object(a.useCallback)((function(e){return r.a.createElement("div",{style:{margin:"2rem 0"}},r.a.createElement("h2",null,e.qty," ",e.model.name),r.a.createElement("h3",null,e.weapons.length>0?"Weapons":"Weapons - None"),r.a.createElement("ul",null,e.weapons.map((function(e){return r.a.createElement("li",null,e.name)}))))}));return r.a.createElement(k,null,r.a.createElement(I,null,"40K Enlist"),r.a.createElement(j.a,{placement:"bottom",title:"List View"},r.a.createElement(E.a,{icon:r.a.createElement(x.a,null),shape:"circle",onClick:function(){l(!0)}})),r.a.createElement(O.a,{title:"Your List",placement:"left",closable:"true",onClose:function(){l(!1)},visible:c,width:"100%",key:"left"},n.map((function(e){return u(e)}))))}var q=t(29),L=t(150),N=(t(139),t(145)),A=t(151);function T(){var e=Object(l.a)(["\n    background-color: lightgray;\n    width:100%;\n    margin: 0.25rem;\n    padding:0.5rem;\n\n    font-weight:bold;\n    display:flex;\n    justify-content:space-between;\n"]);return T=function(){return e},e}var z=s.a.span(T());function F(e){var n=e.equipment,t=e.selfDestruct,a=e.changeQuantity;return r.a.createElement(z,{className:"strip"},r.a.createElement(N.a,{value:n.qty,min:0,onChange:a}),"".concat(n.name," - ").concat(n.points),r.a.createElement(E.a,{className:"showOnHover",size:"small",shape:"circle",type:"danger",icon:r.a.createElement(A.a,null),onClick:t}))}function R(){var e=Object(l.a)(["\n    display:flex;\n    justify-content:flex-start;\n    align-items:center;\n    width:100%;\n    font-size: 2.5rem;\n    font-weight:bold;\n"]);return R=function(){return e},e}function W(){var e=Object(l.a)(["\n    display:flex;\n    justify-content:space-between;\n    align-items:center;\n    width:100%;\n    font-size: 2.5rem;\n    font-weight:bold;\n"]);return W=function(){return e},e}function $(){var e=Object(l.a)(["\n    width: 25rem;\n    min-height:13rem;\n    border-radius:1.25rem;\n    box-shadow: 0 0.1rem 0.2rem 0.2rem lightgrey;\n    padding:1.25rem;\n\n    display:flex;\n    flex-direction: column;\n    align-items:center;\n    justify-content:space-between;\n\n    margin:0.5rem;\n\n    @media (max-width: 768px){\n        width:90vw;\n    }\n"]);return $=function(){return e},e}var M=m.a.Option,_=s.a.div($()),J=s.a.span(W()),H=s.a.span(R());function Y(e){var n=e.selfDestruct,t=e.factionData,i=e.initialData,c=Object(a.useContext)(U).dispatch,l=Object(a.useState)({qty:1,model:{name:"",points:0},weapons:[],total:0}),s=Object(o.a)(l,2),f=s[0],d=s[1],p=Object(a.useState)({name:"",points:0}),h=Object(o.a)(p,2),v=h[0],b=h[1],g=Object(a.useMemo)((function(){return t.UNITS.concat(t["NAMED CHARS"]||[])}),[t]),w=Object(a.useMemo)((function(){return t["RANGED WEAPONS"].concat(t["MELEE WEAPONS"]).concat(t["OTHER WARGEAR"])}),[t]);function y(e){c({type:"update",old:f,new:e}),d(e)}var j=(f.weapons.reduce((function(e,n){return e+parseInt(n.points)*n.qty}),0)+f.model.points)*f.qty;Object(a.useEffect)((function(){var e=Object(q.a)({},f);e.total=j,y(e)}),[j]),Object(a.useEffect)((function(){if(i){y(i);var e=i.weapons[0]?i.weapons[0].name:w[0].name,n=i.weapons[0]?i.weapons[0].name:w[0].name;b({name:e,points:n})}else{var t=parseInt(g[0].points);y({qty:1,model:{name:g[0].name,points:t},weapons:[],total:t}),b({name:w[0].name,points:w[0].points})}}),[t]);var O=function(e){return function(n){var t=Object(q.a)({},f);t[e]=n,y(t)}},x=Object(a.useCallback)((function(e){var n=e.split("$$"),t=Object(o.a)(n,2),a=t[0],r=t[1],i={name:a,points:parseInt(r)};b(i)}),[]),S=function(e){return function(){var n=Object(q.a)({},f),t=Object(u.a)(n.weapons),a=t.findIndex((function(n){return n.name===e})),r=t.filter((function(e,n){return n!=a}));n.weapons=r,y(n)}};return r.a.createElement("div",{className:"unitCard"},r.a.createElement(_,null,r.a.createElement(H,null,r.a.createElement(m.a,{value:f.model.name,style:{width:"50%"},onChange:function(e){var n=e.split("$$"),t=Object(o.a)(n,2),a=t[0],r=t[1],i={name:a,points:parseInt(r)};O("model")(i)},showSearch:!0},g.map((function(e){return r.a.createElement(M,{key:e.name,value:"".concat(e.name,"$$").concat(e.points)},"".concat(e.name," - ").concat(e.points))}))),r.a.createElement(N.a,{value:f.qty,min:0,step:1,onChange:O("qty")})),r.a.createElement(H,null,r.a.createElement(m.a,{value:v.name,style:{width:"50%"},onChange:x,showSearch:!0},w.map((function(e){return r.a.createElement(M,{key:e.name,value:"".concat(e.name,"$$").concat(e.points)},"".concat(e.name," - ").concat(e.points))}))),r.a.createElement(E.a,{type:"primary",onClick:function(){var e=Object(q.a)({},f),n=Object(u.a)(e.weapons),t=e.weapons.findIndex((function(e){return e.name===v.name}));if(-1!=t)n[t].qty=n[t].qty+1,e.weapons=n;else{var a=Object(q.a)(Object(q.a)({},v),{},{qty:1});e.weapons=n.concat([a])}y(e)}},"Add")),f.weapons.map((function(e){return r.a.createElement(F,{id:e.name,equipment:e,changeQuantity:(n=e.name,function(e){var t=Object(q.a)({},f),a=Object(u.a)(t.weapons),r=a.findIndex((function(e){return e.name===n}));-1!=r&&(a[r].qty=e,t.weapons=a,y(t))}),selfDestruct:S(e.name)});var n})),r.a.createElement(J,null,"".concat(j,"pts"),r.a.createElement(E.a,{className:"showOnHover",shape:"circle",type:"danger",icon:r.a.createElement(L.a,null),size:"large",onClick:function(){n(f)}}))))}t(142);function B(){var e=Object(l.a)(["\n    position: absolute;\n    right:2.5rem;\n    bottom:2.5rem;\n"]);return B=function(){return e},e}function P(){var e=Object(l.a)(["\n    grid-row: 2/span 1;\n    background-color: white;\n    width:100%;\n    max-height: 100%;\n    position:relative;\n    padding: 2.5rem;\n\n    display:flex;\n    justify-content:flex-start;\n    align-items:flex-start;\n    flex-wrap:wrap;\n    overflow:auto;\n    \n    @media (max-width: 768px){\n        padding:1rem;\n    }\n"]);return P=function(){return e},e}var G=s.a.div(P());s.a.div(B());function Q(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],i=n[1],c=Object(a.useState)(1),l=Object(o.a)(c,2),s=l[0],m=l[1],f=Object(a.useContext)(U),d=f.data,p=f.factionData,h=f.dispatch;Object(a.useLayoutEffect)((function(){var e=JSON.parse(localStorage.getItem("ENLIST_ARMY_LIST"));if(e.army){var n=[];e.army.forEach((function(e,t){n.push({id:t,initialData:e})})),i(n),m(e.army.length+1)}}),[]);var v=p.currentFaction||p.factionList[0];return r.a.createElement(r.a.Fragment,null,r.a.createElement(D,null),r.a.createElement(G,null,d&&d[v]&&t.map((function(e){return console.log(e.id),r.a.createElement(Y,{key:e.id,initialData:e.initialData,selfDestruct:(n=e.id,function(e){var a=t.filter((function(e){return e.id!==n}));i(a),h({type:"remove",old:e})}),factionData:d[v]});var n}))),r.a.createElement(y,{addItem:function(e){m(s+1);var n={id:s,initialData:e};i([].concat(Object(u.a)(t),[n]))}}))}function K(){var e=Object(l.a)(["\n  width:100%;\n  height: 99.9vh;\n  display: grid;\n  grid-template-rows: 5rem 1fr 5rem;\n  grid-template-columns: 1fr;\n"]);return K=function(){return e},e}var U=r.a.createContext(),V=s.a.div(K()),X=function(e,n){function t(n){var t=!1;return e.filter((function(e){if(t)return!0;var a=!0;if(e.qty===n.qty&&n.model.name===e.model.name){var r=n.weapons,i=e.weapons;if(r.length==i.length)0===r.filter((function(e){return!i.find((function(n){return n.name===e.name}))})).length&&(a=!1)}return a||(t=!0),a}))}var a=n.old;switch(n.type){case"update":return t(a).concat(n.new);case"remove":return t(a)}return"error"};var Z=function(){var e=Object(a.useState)({}),n=Object(o.a)(e,2),t=n[0],i=n[1],c=Object(a.useReducer)(X,[]),l=Object(o.a)(c,2),u=l[0],s=l[1],m=Object(a.useState)({currentFaction:"",factionList:[]}),f=Object(o.a)(m,2),d=f[0],p=f[1];return Object(a.useEffect)((function(){var e=JSON.parse(localStorage.getItem("ENLIST_ARMY_LIST"));console.log(e),fetch("https://raw.githubusercontent.com/Brymo/Enlist/master/public/Data.json").then((function(e){return e.json()})).then((function(n){console.log(n),i(n);var t=Object.keys(n);p({currentFaction:e.faction||t[0],factionList:t,factionSetter:p})}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(U.Provider,{value:{data:t,factionData:d,army:u,dispatch:s}},r.a.createElement(V,null,r.a.createElement(Q,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},98:function(e,n,t){e.exports=t(143)}},[[98,1,2]]]);
//# sourceMappingURL=main.e21044c5.chunk.js.map