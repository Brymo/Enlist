(this.webpackJsonpenlist=this.webpackJsonpenlist||[]).push([[0],{103:function(e,n,t){},104:function(e,n,t){},139:function(e,n,t){},143:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),i=t(12),c=t.n(i),o=(t(103),t(13)),l=t(10),u=(t(104),t(20)),s=t(11),m=t(48),f=t(21),d=t(144),p=d.a.Option;function h(){var e=Object(a.useContext)(oe).factionData,n=e.currentFaction,t=e.factionList,i=e.factionSetter;return r.a.createElement("div",{style:{minWidth:"10rem",width:"20%"}},r.a.createElement(d.a,{value:n,style:{minWidth:"10rem",width:"100%"},onChange:function(e){var n={currentFaction:e,factionList:Object(u.a)(t),factionSetter:i};n.currentFaction=e,console.log(n),i(n)},showSearch:!0},t.map((function(e){return r.a.createElement(p,{key:e,value:e},e)}))))}function v(){var e=Object(l.a)(["\n    width: 50vw;\n    background-color: #1890ff;\n    margin: -2.5rem;\n    padding-left: 2.5rem;\n    height:5rem;\n    display:flex;\n    align-items:center;\n    cursor: pointer;\n    transition: padding-left 0.2s ease-out;\n\n    &:hover{\n        padding-left: 2.8rem;\n    }\n\n    @media (max-width: 950px){\n        position:absolute;\n        right:0;\n        padding-left: 0rem;\n        margin: 0rem;\n        width: 20vw;\n        display:flex;\n        justify-content:center;\n        align-items:center;\n    }\n\n"]);return v=function(){return e},e}function b(){var e=Object(l.a)(["\n    margin-left:1rem;\n"]);return b=function(){return e},e}function g(){var e=Object(l.a)(["\n    font-size: 1rem;\n\n    @media (max-width: 950px){\n        font-size: 1rem;\n    }\n"]);return g=function(){return e},e}function w(){var e=Object(l.a)(["\n    display:flex;\n    flex-direction:column;\n    align-items:flex-start;\n    justify-content:center;\n    font-size: 1.5rem;\n\n    @media (max-width: 950px){\n        font-size: 1rem;\n    }\n"]);return w=function(){return e},e}function O(){var e=Object(l.a)(["\n\n    grid-row: 3/span 1;\n\n    width:100%;\n    height: 5rem;\n    display:flex;\n    justify-content:space-between;\n    align-items: center;\n    border-top: 1px solid grey ;\n    padding: 0 2.5rem;\n    font-size: 2.5rem;\n    font-weight:bold;\n\n    @media (max-width: 950px){\n        justify-content:flex-start;\n        font-size: 1rem;\n    }\n\n"]);return O=function(){return e},e}var E=s.a.div(O()),j=s.a.div(w()),y=s.a.div(g()),x=s.a.div(b()),S=s.a.div(v());function F(e){return{with:function(n){var t=!0;return n.forEach((function(n){n(e)||(t=!1)})),t}}}function L(e,n,t){return function(a){return a[e]>=n&&a[e]<=t}}var k=[L("HQ",1,2),L("T",1,3),L("E",0,2),L("FA",0,2),L("HS",0,2),L("F",0,2),L("LOW",0,1)],C=[L("HQ",2,3),L("T",3,6),L("E",0,6),L("FA",0,3),L("HS",0,3),L("F",0,2),L("LOW",0,1)],I=[L("HQ",3,5),L("T",6,12),L("E",3,8),L("FA",3,5),L("HS",3,5),L("F",0,2),L("LOW",0,1)];function D(e){var n,t=Object(a.useContext)(oe),i=t.army,c=t.factionData;Object(a.useLayoutEffect)((function(){setTimeout((function(){var e={army:Object(u.a)(i),faction:c.currentFaction};console.log(e),localStorage.setItem("ENLIST_ARMY_LIST",JSON.stringify(e))}),0)}),[i,c]);var o=i.reduce((function(e,n){var t=Object(f.a)({},e);return t[n.model.role]+=1,t}),(n={HQ:0,T:0,E:0,FA:0,HS:0,DT:0,F:0},Object(m.a)(n,"F",0),Object(m.a)(n,"LOW",0),n)),l=F(o).with(k),s=F(o).with(C),d=F(o).with(I),p=l?"Patrol":s?"Spearhead":d?"Outrider":"Invalid Detachment",v=i.reduce((function(e,n){return e+n.total}),0);return r.a.createElement(E,null,r.a.createElement(j,null,r.a.createElement("div",null,"Total: ".concat(v,"pts")),r.a.createElement(y,null,p)),r.a.createElement(x,null,r.a.createElement(h,null)),r.a.createElement(S,{onClick:function(){e.addItem()}},"Add + "))}var A=t(149),T=t(148),q=t(146),H=t(152);function N(){var e=Object(l.a)(["\n    position:absolute;\n    left:3rem;\n    font-size:1rem;\n\n"]);return N=function(){return e},e}function W(){var e=Object(l.a)(["\n  grid-row: 1 / span 1;\n\n  width: 100%;\n  height: 3rem;\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  padding: 0 2.5rem;\n  font-size: 2.5rem;\n  font-weight: bold;\n  box-shadow: 0 0.1rem 0.1rem 0.1rem lightgrey;\n\n  @media (max-width: 950px) {\n    font-size: 1rem;\n  }\n"]);return W=function(){return e},e}var z=s.a.div(W()),$=s.a.div(N());function R(e){var n=Object(a.useContext)(oe).army,t=Object(a.useState)(!1),i=Object(o.a)(t,2),c=i[0],l=i[1];n.reduce((function(e,n){return e+n.total}),0);var u=Object(a.useCallback)((function(e){return r.a.createElement("div",{style:{margin:"2rem 0"}},r.a.createElement("h2",null,e.qty," ",e.model.name),r.a.createElement("h3",null,e.weapons.length>0?"Weapons":"Weapons - None"),r.a.createElement("ul",null,e.weapons.map((function(e){return r.a.createElement("li",null,e.name)}))))}));return r.a.createElement(z,null,r.a.createElement($,null,"40K Enlist"),r.a.createElement(A.a,{placement:"bottom",title:"List View"},r.a.createElement(T.a,{icon:r.a.createElement(H.a,null),shape:"circle",onClick:function(){l(!0)}})),r.a.createElement(q.a,{title:"Your List",placement:"left",closable:"true",onClose:function(){l(!1)},visible:c,width:"100%",key:"left"},n.map((function(e){return u(e)}))))}var M=t(150),Q=(t(139),t(145)),_=t(151);function J(){var e=Object(l.a)(["\n    background-color: lightgray;\n    width:100%;\n    margin: 0.25rem;\n    padding:0.5rem;\n\n    font-weight:bold;\n    display:flex;\n    justify-content:space-between;\n"]);return J=function(){return e},e}var P=s.a.span(J());function Y(e){var n=e.equipment,t=e.selfDestruct,a=e.changeQuantity;return r.a.createElement(P,{className:"strip"},r.a.createElement(Q.a,{value:n.qty,min:0,onChange:a}),"".concat(n.name," - ").concat(n.points),r.a.createElement(T.a,{className:"showOnHover",size:"small",shape:"circle",type:"danger",icon:r.a.createElement(_.a,null),onClick:t}))}function B(){var e=Object(l.a)(["\n    display:flex;\n    justify-content:flex-start;\n    align-items:center;\n    width:100%;\n    font-size: 2.5rem;\n    font-weight:bold;\n"]);return B=function(){return e},e}function G(){var e=Object(l.a)(["\n    display:flex;\n    justify-content:space-between;\n    align-items:center;\n    width:100%;\n    font-size: 2.5rem;\n    font-weight:bold;\n"]);return G=function(){return e},e}function K(){var e=Object(l.a)(["\n    width: 25rem;\n    min-height:13rem;\n    border-radius:1.25rem;\n    box-shadow: 0 0.1rem 0.2rem 0.2rem lightgrey;\n    padding:1.25rem;\n\n    display:flex;\n    flex-direction: column;\n    align-items:center;\n    justify-content:space-between;\n\n    margin:0.5rem;\n\n    @media (max-width: 768px){\n        width:90vw;\n    }\n"]);return K=function(){return e},e}var U=d.a.Option,V=s.a.div(K()),X=s.a.span(G()),Z=s.a.span(B()),ee={HQ:"HQ",T:"Troop",E:"Elite",FA:"F.Attack",HS:"H.Support",F:"Flyer",FO:"Fort.",LOW:"L.O.W"};function ne(e){var n=e.selfDestruct,t=e.factionData,i=e.initialData,c=Object(a.useContext)(oe).dispatch,l=Object(a.useState)({qty:1,model:{name:"",role:"",points:0},weapons:[],total:0}),s=Object(o.a)(l,2),m=s[0],p=s[1],h=Object(a.useState)({name:"",points:0}),v=Object(o.a)(h,2),b=v[0],g=v[1],w=Object(a.useMemo)((function(){return t.UNITS.concat(t["NAMED CHARS"]||[])}),[t]),O=Object(a.useMemo)((function(){return t["RANGED WEAPONS"].concat(t["MELEE WEAPONS"]).concat(t["OTHER WARGEAR"])}),[t]);function E(e){c({type:"update",old:m,new:e}),p(e)}var j=(m.weapons.reduce((function(e,n){return e+parseInt(n.points)*n.qty}),0)+m.model.points)*m.qty;Object(a.useEffect)((function(){var e=Object(f.a)({},m);e.total=j,E(e)}),[j]),Object(a.useEffect)((function(){if(i){E(i);var e=i.weapons[0]?i.weapons[0].name:O[0].name,n=i.weapons[0]?i.weapons[0].name:O[0].name;g({name:e,points:n})}else{var t=parseInt(w[0].points);E({qty:1,model:{name:w[0].name,points:t,role:w[0].role},weapons:[],total:t}),g({name:O[0].name,points:O[0].points})}}),[t]);var y=function(e){return function(n){var t=Object(f.a)({},m);t[e]=n,E(t)}},x=Object(a.useCallback)((function(e){var n=e.split("$$"),t=Object(o.a)(n,2),a=t[0],r=t[1],i={name:a,points:parseInt(r)};g(i)}),[]),S=function(e){return function(){var n=Object(f.a)({},m),t=Object(u.a)(n.weapons),a=t.findIndex((function(n){return n.name===e})),r=t.filter((function(e,n){return n!=a}));n.weapons=r,E(n)}};return console.log(w),r.a.createElement("div",{className:"unitCard"},r.a.createElement(V,null,r.a.createElement(Z,null,r.a.createElement(d.a,{value:m.model.name,style:{width:"50%"},onChange:function(e){var n=e.split("$$"),t=Object(o.a)(n,3),a=t[0],r=t[1],i=t[2],c={name:a,points:parseInt(r),role:i};y("model")(c)},showSearch:!0},w.map((function(e){return r.a.createElement(U,{key:e.name,value:"".concat(e.name,"$$").concat(e.points,"$$").concat(e.role)},"[".concat(e.role,"] ").concat(e.name," - ").concat(e.points))}))),r.a.createElement(Q.a,{value:m.qty,min:0,step:1,onChange:y("qty")})),r.a.createElement(Z,null,r.a.createElement(d.a,{value:b.name,style:{width:"50%"},onChange:x,showSearch:!0},O.map((function(e){return r.a.createElement(U,{key:e.name,value:"".concat(e.name,"$$").concat(e.points)},"".concat(e.name," - ").concat(e.points))}))),r.a.createElement(T.a,{type:"primary",onClick:function(){var e=Object(f.a)({},m),n=Object(u.a)(e.weapons),t=e.weapons.findIndex((function(e){return e.name===b.name}));if(-1!=t)n[t].qty=n[t].qty+1,e.weapons=n;else{var a=Object(f.a)(Object(f.a)({},b),{},{qty:1});e.weapons=n.concat([a])}E(e)}},"Add")),m.weapons.map((function(e){return r.a.createElement(Y,{id:e.name,equipment:e,changeQuantity:(n=e.name,function(e){var t=Object(f.a)({},m),a=Object(u.a)(t.weapons),r=a.findIndex((function(e){return e.name===n}));-1!=r&&(a[r].qty=e,t.weapons=a,E(t))}),selfDestruct:S(e.name)});var n})),r.a.createElement(X,null,"".concat(j,"pts - ").concat(ee[m.model.role]),r.a.createElement(T.a,{className:"showOnHover",shape:"circle",type:"danger",icon:r.a.createElement(M.a,null),size:"large",onClick:function(){n(m)}}))))}t(142);function te(){var e=Object(l.a)(["\n    position: absolute;\n    right:2.5rem;\n    bottom:2.5rem;\n"]);return te=function(){return e},e}function ae(){var e=Object(l.a)(["\n    grid-row: 2/span 1;\n    background-color: white;\n    width:100%;\n    max-height: 100%;\n    position:relative;\n    padding: 2.5rem;\n\n    display:flex;\n    justify-content:flex-start;\n    align-items:flex-start;\n    flex-wrap:wrap;\n    overflow:auto;\n    \n    @media (max-width: 768px){\n        padding:1rem;\n    }\n"]);return ae=function(){return e},e}var re=s.a.div(ae());s.a.div(te());function ie(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],i=n[1],c=Object(a.useState)(1),l=Object(o.a)(c,2),s=l[0],m=l[1],f=Object(a.useContext)(oe),d=f.data,p=f.factionData,h=f.dispatch;Object(a.useLayoutEffect)((function(){var e=JSON.parse(localStorage.getItem("ENLIST_ARMY_LIST"));if(e.army){var n=[];e.army.forEach((function(e,t){n.push({id:t,initialData:e})})),i(n),m(e.army.length+1)}}),[]);var v=p.currentFaction||p.factionList[0];return r.a.createElement(r.a.Fragment,null,r.a.createElement(R,null),r.a.createElement(re,null,d&&d[v]&&t.map((function(e){return console.log(e.id),r.a.createElement(ne,{key:e.id,initialData:e.initialData,selfDestruct:(n=e.id,function(e){var a=t.filter((function(e){return e.id!==n}));i(a),h({type:"remove",old:e})}),factionData:d[v]});var n}))),r.a.createElement(D,{addItem:function(e){m(s+1);var n={id:s,initialData:e};i([].concat(Object(u.a)(t),[n]))}}))}function ce(){var e=Object(l.a)(["\n  width:100%;\n  height: 99.9vh;\n  display: grid;\n  grid-template-rows: 5rem 1fr 5rem;\n  grid-template-columns: 1fr;\n"]);return ce=function(){return e},e}var oe=r.a.createContext(),le=s.a.div(ce()),ue=function(e,n){function t(n){var t=!1;return e.filter((function(e){if(t)return!0;var a=!0;if(e.qty===n.qty&&n.model.name===e.model.name){var r=n.weapons,i=e.weapons;if(r.length==i.length)0===r.filter((function(e){return!i.find((function(n){return n.name===e.name}))})).length&&(a=!1)}return a||(t=!0),a}))}var a=n.old;switch(n.type){case"update":return t(a).concat(n.new);case"remove":return t(a)}return"error"};var se=function(){var e=Object(a.useState)({}),n=Object(o.a)(e,2),t=n[0],i=n[1],c=Object(a.useReducer)(ue,[]),l=Object(o.a)(c,2),u=l[0],s=l[1],m=Object(a.useState)({currentFaction:"",factionList:[]}),f=Object(o.a)(m,2),d=f[0],p=f[1];return Object(a.useEffect)((function(){var e=JSON.parse(localStorage.getItem("ENLIST_ARMY_LIST"));console.log(e),fetch("https://raw.githubusercontent.com/Brymo/Enlist/master/public/Data.json").then((function(e){return e.json()})).then((function(n){console.log(n),i(n);var t=Object.keys(n);p({currentFaction:e.faction||t[0],factionList:t,factionSetter:p})}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(oe.Provider,{value:{data:t,factionData:d,army:u,dispatch:s}},r.a.createElement(le,null,r.a.createElement(ie,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(se,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},98:function(e,n,t){e.exports=t(143)}},[[98,1,2]]]);
//# sourceMappingURL=main.b0da25a6.chunk.js.map