(this.webpackJsonpenlist=this.webpackJsonpenlist||[]).push([[0],{127:function(n,e,t){},137:function(n,e,t){"use strict";t.r(e);var a=t(0),r=t.n(a),c=t(12),i=t.n(c),o=(t(97),t(16)),u=t(10),l=(t(98),t(19)),s=t(11),m=t(138),f=m.a.Option;function d(){var n=Object(a.useContext)(J).factionData,e=n.currentFaction,t=n.factionList,c=n.factionSetter;return r.a.createElement("div",{style:{minWidth:"10rem",width:"20%"}},r.a.createElement(m.a,{value:e,style:{minWidth:"10rem",width:"100%"},onChange:function(n){var e={currentFaction:n,factionList:Object(l.a)(t),factionSetter:c};e.currentFaction=n,console.log(e),c(e)},showSearch:!0},t.map((function(n){return r.a.createElement(f,{key:n,value:n},n)}))))}function p(){var n=Object(u.a)(["\n    width: 50vw;\n    background-color: #1890ff;\n    margin: -2.5rem;\n    height:5rem;\n    display:flex;\n    align-items:center;\n    cursor: pointer;\n    transition: padding-left 0.2s ease-out;\n\n    &:hover{\n        padding-left: 2.8rem;\n    }\n    @media (max-width: 768px){\n        position:absolute;\n        right:0;\n        padding-left: 0rem;\n        margin: 0rem;\n        width: 20vw;\n        display:flex;\n        justify-content:center;\n        align-items:center;\n    }\n\n"]);return p=function(){return n},n}function v(){var n=Object(u.a)(["\n    margin-left:1rem;\n"]);return v=function(){return n},n}function h(){var n=Object(u.a)(["\n\n    grid-row: 2/span 1;\n\n    width:100%;\n    height: 5rem;\n    display:flex;\n    justify-content:flex-start;\n    align-items: center;\n    border-top: 1px solid grey ;\n    padding: 0 2.5rem;\n    font-size: 2.5rem;\n    font-weight:bold;\n\n    @media (max-width: 768px){\n        font-size: 1rem;\n    }\n\n"]);return h=function(){return n},n}var g=s.a.div(h()),b=s.a.div(v()),w=s.a.div(p());function y(n){var e=Object(a.useContext)(J),t=e.army,c=e.factionData;Object(a.useLayoutEffect)((function(){setTimeout((function(){var n={army:Object(l.a)(t),faction:c.currentFaction};console.log(n),localStorage.setItem("ENLIST_ARMY_LIST",JSON.stringify(n))}),0)}),[t,c]);var i=t.reduce((function(n,e){return n+e.total}),0);return r.a.createElement(g,null,"Total: ".concat(i,"pts"),r.a.createElement(b,null,r.a.createElement(d,null)),r.a.createElement(w,{onClick:function(){n.addItem()}},"Add + "))}var O=t(26),j=t(142),E=(t(127),t(139)),x=t(141),S=t(143);function I(){var n=Object(u.a)(["\n    background-color: lightgray;\n    width:100%;\n    margin: 0.25rem;\n    padding:0.5rem;\n\n    font-weight:bold;\n    display:flex;\n    justify-content:space-between;\n"]);return I=function(){return n},n}var D=s.a.span(I());function k(n){var e=n.equipment,t=n.selfDestruct,a=n.changeQuantity;return r.a.createElement(D,{className:"strip"},r.a.createElement(E.a,{value:e.qty,min:0,onChange:a}),"".concat(e.name," - ").concat(e.points),r.a.createElement(x.a,{className:"showOnHover",size:"small",shape:"circle",type:"danger",icon:r.a.createElement(S.a,null),onClick:t}))}function C(){var n=Object(u.a)(["\n    display:flex;\n    justify-content:flex-start;\n    align-items:center;\n    width:100%;\n    font-size: 2.5rem;\n    font-weight:bold;\n"]);return C=function(){return n},n}function q(){var n=Object(u.a)(["\n    display:flex;\n    justify-content:space-between;\n    align-items:center;\n    width:100%;\n    font-size: 2.5rem;\n    font-weight:bold;\n"]);return q=function(){return n},n}function N(){var n=Object(u.a)(["\n    width: 25rem;\n    min-height:13rem;\n    border-radius:1.25rem;\n    box-shadow: 0 0.1rem 0.2rem 0.2rem lightgrey;\n    padding:1.25rem;\n\n    display:flex;\n    flex-direction: column;\n    align-items:center;\n    justify-content:space-between;\n\n    margin:0.5rem;\n"]);return N=function(){return n},n}var L=m.a.Option,A=s.a.div(N()),T=s.a.span(q()),F=s.a.span(C());function R(n){var e=n.selfDestruct,t=n.factionData,c=n.initialData,i=Object(a.useContext)(J).dispatch,u=Object(a.useState)({qty:1,model:{name:"",points:0},weapons:[],total:0}),s=Object(o.a)(u,2),f=s[0],d=s[1],p=Object(a.useState)({name:"",points:0}),v=Object(o.a)(p,2),h=v[0],g=v[1],b=Object(a.useMemo)((function(){return t.UNITS.concat(t["NAMED CHARS"]||[])}),[t]),w=Object(a.useMemo)((function(){return t["RANGED WEAPONS"].concat(t["MELEE WEAPONS"]).concat(t["OTHER WARGEAR"])}),[t]);function y(n){i({type:"update",old:f,new:n}),d(n)}var S=(f.weapons.reduce((function(n,e){return n+parseInt(e.points)*e.qty}),0)+f.model.points)*f.qty;Object(a.useEffect)((function(){var n=Object(O.a)({},f);n.total=S,y(n)}),[S]),Object(a.useEffect)((function(){if(c){y(c);var n=c.weapons[0]?c.weapons[0].name:w[0].name,e=c.weapons[0]?c.weapons[0].name:w[0].name;g({name:n,points:e})}else{var t=parseInt(b[0].points);y({qty:1,model:{name:b[0].name,points:t},weapons:[],total:t}),g({name:w[0].name,points:w[0].points})}}),[t]);var I=function(n){return function(e){var t=Object(O.a)({},f);t[n]=e,y(t)}},D=Object(a.useCallback)((function(n){var e=n.split("$$"),t=Object(o.a)(e,2),a=t[0],r=t[1],c={name:a,points:parseInt(r)};g(c)}),[]),C=function(n){return function(){var e=Object(O.a)({},f),t=Object(l.a)(e.weapons),a=t.findIndex((function(e){return e.name===n})),r=t.filter((function(n,e){return e!=a}));e.weapons=r,y(e)}};return r.a.createElement("div",{className:"unitCard"},r.a.createElement(A,null,r.a.createElement(F,null,r.a.createElement(m.a,{value:f.model.name,style:{width:"50%"},onChange:function(n){var e=n.split("$$"),t=Object(o.a)(e,2),a=t[0],r=t[1],c={name:a,points:parseInt(r)};I("model")(c)},showSearch:!0},b.map((function(n){return r.a.createElement(L,{key:n.name,value:"".concat(n.name,"$$").concat(n.points)},"".concat(n.name," - ").concat(n.points))}))),r.a.createElement(E.a,{value:f.qty,min:0,step:1,onChange:I("qty")})),r.a.createElement(F,null,r.a.createElement(m.a,{value:h.name,style:{width:"50%"},onChange:D,showSearch:!0},w.map((function(n){return r.a.createElement(L,{key:n.name,value:"".concat(n.name,"$$").concat(n.points)},"".concat(n.name," - ").concat(n.points))}))),r.a.createElement(x.a,{type:"primary",onClick:function(){var n=Object(O.a)({},f),e=Object(l.a)(n.weapons),t=n.weapons.findIndex((function(n){return n.name===h.name}));if(-1!=t)e[t].qty=e[t].qty+1,n.weapons=e;else{var a=Object(O.a)(Object(O.a)({},h),{},{qty:1});n.weapons=e.concat([a])}y(n)}},"Add")),f.weapons.map((function(n){return r.a.createElement(k,{id:n.name,equipment:n,changeQuantity:(e=n.name,function(n){var t=Object(O.a)({},f),a=Object(l.a)(t.weapons),r=a.findIndex((function(n){return n.name===e}));-1!=r&&(a[r].qty=n,t.weapons=a,y(t))}),selfDestruct:C(n.name)});var e})),r.a.createElement(T,null,"".concat(S,"pts"),r.a.createElement(x.a,{className:"showOnHover",shape:"circle",type:"danger",icon:r.a.createElement(j.a,null),size:"large",onClick:function(){e(f)}}))))}t(136);function $(){var n=Object(u.a)(["\n    position: absolute;\n    right:2.5rem;\n    bottom:2.5rem;\n"]);return $=function(){return n},n}function M(){var n=Object(u.a)(["\n    grid-row: 1/span 1;\n    background-color: white;\n    width:100%;\n    max-height: 100%;\n    position:relative;\n    padding: 2.5rem;\n\n    display:flex;\n    justify-content:flex-start;\n    align-items:flex-start;\n    flex-wrap:wrap;\n    overflow:auto;\n    \n"]);return M=function(){return n},n}var W=s.a.div(M());s.a.div($());function z(){var n=Object(a.useState)([]),e=Object(o.a)(n,2),t=e[0],c=e[1],i=Object(a.useState)(1),u=Object(o.a)(i,2),s=u[0],m=u[1],f=Object(a.useContext)(J),d=f.data,p=f.factionData,v=f.dispatch;Object(a.useLayoutEffect)((function(){var n=JSON.parse(localStorage.getItem("ENLIST_ARMY_LIST"));if(n.army){var e=[];n.army.forEach((function(n,t){e.push({id:t,initialData:n})})),c(e),m(n.army.length+1)}}),[]);var h=p.currentFaction||p.factionList[0];return r.a.createElement(r.a.Fragment,null,r.a.createElement(W,null,d&&d[h]&&t.map((function(n){return console.log(n.id),r.a.createElement(R,{key:n.id,initialData:n.initialData,selfDestruct:(e=n.id,function(n){var a=t.filter((function(n){return n.id!==e}));c(a),v({type:"remove",old:n})}),factionData:d[h]});var e}))),r.a.createElement(y,{addItem:function(n){m(s+1);var e={id:s,initialData:n};c([].concat(Object(l.a)(t),[e]))}}))}function _(){var n=Object(u.a)(["\n  width:100%;\n  height: 99.9vh;\n  display: grid;\n  grid-template-rows: 1fr 5rem;\n  grid-template-columns: 1fr;\n"]);return _=function(){return n},n}var J=r.a.createContext(),H=s.a.div(_()),B=function(n,e){function t(e){var t=!1;return n.filter((function(n){if(t)return!0;var a=!0;if(n.qty===e.qty&&e.model.name===n.model.name){var r=e.weapons,c=n.weapons;if(r.length==c.length)0===r.filter((function(n){return!c.find((function(e){return e.name===n.name}))})).length&&(a=!1)}return a||(t=!0),a}))}var a=e.old;switch(e.type){case"update":return t(a).concat(e.new);case"remove":return t(a)}return"error"};var P=function(){var n=Object(a.useState)({}),e=Object(o.a)(n,2),t=e[0],c=e[1],i=Object(a.useReducer)(B,[]),u=Object(o.a)(i,2),l=u[0],s=u[1],m=Object(a.useState)({currentFaction:"",factionList:[]}),f=Object(o.a)(m,2),d=f[0],p=f[1];return Object(a.useEffect)((function(){var n=JSON.parse(localStorage.getItem("ENLIST_ARMY_LIST"));console.log(n),fetch("https://raw.githubusercontent.com/Brymo/Enlist/master/public/Data.json").then((function(n){return n.json()})).then((function(e){console.log(e),c(e);var t=Object.keys(e);p({currentFaction:n.faction||t[0],factionList:t,factionSetter:p})}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(J.Provider,{value:{data:t,factionData:d,army:l,dispatch:s}},r.a.createElement(H,null,r.a.createElement(z,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){n.unregister()})).catch((function(n){console.error(n.message)}))},92:function(n,e,t){n.exports=t(137)},97:function(n,e,t){},98:function(n,e,t){}},[[92,1,2]]]);
//# sourceMappingURL=main.15974b4b.chunk.js.map