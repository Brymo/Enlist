(this.webpackJsonpenlist=this.webpackJsonpenlist||[]).push([[0],{106:function(e,n,t){e.exports=t(156)},111:function(e,n,t){},112:function(e,n,t){},152:function(e,n,t){},156:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),i=t(17),c=t.n(i),o=(t(111),t(15)),l=t(10),u=(t(112),t(29)),s=t(11),m=t(47),f=t(30),d=t(157),p=d.a.Option;function v(){var e=Object(a.useContext)(fe).factionData,n=e.currentFaction,t=e.factionList,i=e.factionSetter;return r.a.createElement("div",{style:{minWidth:"10rem",width:"20%"}},r.a.createElement(d.a,{value:n,style:{minWidth:"10rem",width:"100%"},onChange:function(e){var n={currentFaction:e,factionList:Object(u.a)(t),factionSetter:i};n.currentFaction=e,console.log(n),i(n)},showSearch:!0},t.map((function(e){return r.a.createElement(p,{key:e,value:e},e)}))))}function h(){var e=Object(l.a)(["\n    width: 50vw;\n    background-color: #1890ff;\n    margin: -2.5rem;\n    padding-left: 2.5rem;\n    height:5rem;\n    display:flex;\n    align-items:center;\n    cursor: pointer;\n    transition: padding-left 0.2s ease-out;\n\n    &:hover{\n        padding-left: 2.8rem;\n    }\n\n    @media (max-width: 950px){\n        position:absolute;\n        right:0;\n        padding-left: 0rem;\n        margin: 0rem;\n        width: 20vw;\n        display:flex;\n        justify-content:center;\n        align-items:center;\n    }\n\n"]);return h=function(){return e},e}function b(){var e=Object(l.a)(["\n    margin-left:1rem;\n"]);return b=function(){return e},e}function g(){var e=Object(l.a)(["\n    font-size: 1rem;\n\n    @media (max-width: 950px){\n        font-size: 1rem;\n    }\n"]);return g=function(){return e},e}function w(){var e=Object(l.a)(["\n    display:flex;\n    flex-direction:column;\n    align-items:flex-start;\n    justify-content:center;\n    font-size: 1.5rem;\n\n    @media (max-width: 950px){\n        font-size: 1rem;\n    }\n"]);return w=function(){return e},e}function O(){var e=Object(l.a)(["\n\n    grid-row: 3/span 1;\n\n    width:100%;\n    height: 5rem;\n    display:flex;\n    justify-content:space-between;\n    align-items: center;\n    border-top: 1px solid grey ;\n    padding: 0 2.5rem;\n    font-size: 2.5rem;\n    font-weight:bold;\n\n    @media (max-width: 950px){\n        justify-content:flex-start;\n        font-size: 1rem;\n    }\n\n"]);return O=function(){return e},e}var j=s.a.div(O()),E=s.a.div(w()),y=s.a.div(g()),x=s.a.div(b()),S=s.a.div(h());function L(e){return{with:function(n){var t=!0;return n.forEach((function(n){n(e)||(t=!1)})),t}}}function F(e,n,t){return function(a){return a[e]>=n&&a[e]<=t}}var C=[F("HQ",1,2),F("T",1,3),F("E",0,2),F("FA",0,2),F("HS",0,2),F("F",0,2),F("LOW",0,1)],D=[F("HQ",2,3),F("T",3,6),F("E",0,6),F("FA",0,3),F("HS",0,3),F("F",0,2),F("LOW",0,1)],I=[F("HQ",3,5),F("T",6,12),F("E",3,8),F("FA",3,5),F("HS",3,5),F("F",0,2),F("LOW",0,1)];function k(e){var n,t=Object(a.useContext)(fe),i=t.army,c=t.factionData,o=t.total,l=t.limiter.value;Object(a.useLayoutEffect)((function(){setTimeout((function(){var e={army:Object(u.a)(i),faction:c.currentFaction,pointLimit:l};localStorage.setItem("ENLIST_ARMY_LIST",JSON.stringify(e))}),0)}),[i,c,l]);var s=i.reduce((function(e,n){var t=Object(f.a)({},e);return t[n.model.role]+=1,t}),(n={HQ:0,T:0,E:0,FA:0,HS:0,DT:0,F:0},Object(m.a)(n,"F",0),Object(m.a)(n,"LOW",0),Object(m.a)(n,"DRON",0),n)),d=L(s).with(C),p=L(s).with(D),h=L(s).with(I),b=d?"Patrol":p?"Spearhead":h?"Outrider":"Invalid Detachment";return r.a.createElement(j,null,r.a.createElement(E,null,r.a.createElement("div",null,"Total: ".concat(o,"pts")),r.a.createElement(y,null,b)),r.a.createElement(x,null,r.a.createElement(v,null)),r.a.createElement(S,{onClick:function(){e.addItem()}},"Add + "))}var N=t(161),A=t(162),T=t(104),H=t(159),q=t(165);function W(){var e=Object(l.a)(["\n  width: 20vw;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-right: 2rem;\n"]);return W=function(){return e},e}function z(){var e=Object(l.a)(["\n    position:absolute;\n    left:3rem;\n    font-size:1rem;\n\n"]);return z=function(){return e},e}function $(){var e=Object(l.a)(["\n  grid-row: 1 / span 1;\n\n  width: 100%;\n  height: 3rem;\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  padding: 0 2.5rem;\n  font-size: 2.5rem;\n  font-weight: bold;\n  box-shadow: 0 0.1rem 0.1rem 0.1rem lightgrey;\n\n  @media (max-width: 950px) {\n    font-size: 1rem;\n  }\n"]);return $=function(){return e},e}var R=s.a.div($()),M=s.a.div(z()),Q=s.a.div(W());function _(e){var n=Object(a.useContext)(fe),t=n.army,i=n.limiter,c=i.value,l=i.setter,u=Object(a.useState)(!1),s=Object(o.a)(u,2),m=s[0],f=s[1];t.reduce((function(e,n){return e+n.total}),0);var d=Object(a.useCallback)((function(e){return r.a.createElement("div",{style:{margin:"2rem 0"}},r.a.createElement("h2",null,e.qty," ",e.model.name),r.a.createElement("h3",null,e.weapons.length>0?"Weapons":"Weapons - None"),r.a.createElement("ul",null,e.weapons.map((function(e){return r.a.createElement("li",null,e.name)}))))})),p=Object(a.useCallback)((function(e){var n=e.currentTarget.value;/^[0-9]+$/g.test(n)&&l(n)}),[l]);return r.a.createElement(R,null,r.a.createElement(M,null,"40K Enlist"),r.a.createElement(Q,null,r.a.createElement(N.a,{placeholder:"Point Limit",value:c,onChange:p})),r.a.createElement(A.a,{placement:"bottom",title:"List View"},r.a.createElement(T.a,{icon:r.a.createElement(q.a,null),shape:"circle",onClick:function(){f(!0)}})),r.a.createElement(H.a,{title:"Your List",placement:"left",closable:"true",onClose:function(){f(!1)},visible:m,width:"100%",key:"left"},t.map((function(e){return d(e)}))))}var J=t(163),P=(t(152),t(158)),Y=t(164);function B(){var e=Object(l.a)(["\n    background-color: lightgray;\n    width:100%;\n    margin: 0.25rem;\n    padding:0.5rem;\n\n    font-weight:bold;\n    display:flex;\n    justify-content:space-between;\n"]);return B=function(){return e},e}var G=s.a.span(B());function K(e){var n=e.equipment,t=e.selfDestruct,a=e.changeQuantity;return r.a.createElement(G,{className:"strip"},r.a.createElement(P.a,{value:n.qty,min:0,onChange:a}),"".concat(n.name," - ").concat(n.points),r.a.createElement(T.a,{className:"showOnHover",size:"small",shape:"circle",type:"danger",icon:r.a.createElement(Y.a,null),onClick:t}))}function U(){var e=Object(l.a)(["\n    display:flex;\n    justify-content:flex-start;\n    align-items:center;\n    width:100%;\n    font-size: 2.5rem;\n    font-weight:bold;\n"]);return U=function(){return e},e}function V(){var e=Object(l.a)(["\n    margin-left:1rem;\n    font-size: 1rem;\n    color:lightgrey;\n    text-decoration:underline;\n"]);return V=function(){return e},e}function X(){var e=Object(l.a)(["\n    display:flex;\n    justify-content:space-between;\n    align-items:center;\n    width:100%;\n    font-size: 2.5rem;\n    font-weight:bold;\n"]);return X=function(){return e},e}function Z(){var e=Object(l.a)(["\n    width: 25rem;\n    min-height:13rem;\n    border-radius:1.25rem;\n    box-shadow: 0 0.1rem 0.2rem 0.2rem lightgrey;\n    padding:1.25rem;\n\n    display:flex;\n    flex-direction: column;\n    align-items:center;\n    justify-content:space-between;\n\n    margin:0.5rem;\n\n    @media (max-width: 768px){\n        width:90vw;\n    }\n"]);return Z=function(){return e},e}var ee=d.a.Option,ne=s.a.div(Z()),te=s.a.span(X()),ae=s.a.span(V()),re=s.a.span(U()),ie={HQ:"HQ",T:"Troop",E:"Elite",FA:"F.Attack",HS:"H.Support",F:"Flyer",FO:"Fort.",LOW:"L.O.W",DRON:"Drone"};function ce(e){var n=e.selfDestruct,t=e.factionData,i=e.initialData,c=Object(a.useContext)(fe),l=c.dispatch,s=c.total,m=c.limiter.value,p=Object(a.useState)({qty:1,model:{name:"",role:"",points:0},weapons:[],total:0}),v=Object(o.a)(p,2),h=v[0],b=v[1],g=Object(a.useState)({name:"",points:0}),w=Object(o.a)(g,2),O=w[0],j=w[1],E=Object(a.useMemo)((function(){return t.UNITS.concat(t["NAMED CHARS"]||[])}),[t]),y=Object(a.useMemo)((function(){return t["RANGED WEAPONS"].concat(t["MELEE WEAPONS"]).concat(t["OTHER WARGEAR"])}),[t]);function x(e){l({type:"update",old:h,new:e}),b(e)}var S=(h.weapons.reduce((function(e,n){return e+parseInt(n.points)*n.qty}),0)+h.model.points)*h.qty;Object(a.useEffect)((function(){var e=Object(f.a)({},h);e.total=S,x(e)}),[S]),Object(a.useEffect)((function(){if(i){x(i);var e=i.weapons[0]?i.weapons[0].name:y[0].name,n=i.weapons[0]?i.weapons[0].name:y[0].name;j({name:e,points:n})}else{var t=parseInt(E[0].points);x({qty:1,model:{name:E[0].name,points:t,role:E[0].role},weapons:[],total:t}),j({name:y[0].name,points:y[0].points})}}),[t]);var L=function(e){return function(n){var t=Object(f.a)({},h);t[e]=n,x(t)}},F=Object(a.useCallback)((function(e){var n=e.split("$$"),t=Object(o.a)(n,2),a=t[0],r=t[1],i={name:a,points:parseInt(r)};j(i)}),[]),C=function(e){return function(){var n=Object(f.a)({},h),t=Object(u.a)(n.weapons),a=t.findIndex((function(n){return n.name===e})),r=t.filter((function(e,n){return n!=a}));n.weapons=r,x(n)}};return r.a.createElement("div",{className:"unitCard"},r.a.createElement(ne,null,r.a.createElement(re,null,r.a.createElement(d.a,{value:h.model.name,style:{width:"50%"},onChange:function(e){var n=e.split("$$"),t=Object(o.a)(n,3),a=t[0],r=t[1],i=t[2],c={name:a,points:parseInt(r),role:i};L("model")(c)},showSearch:!0},E.map((function(e){var n=!!s&&s+parseInt(e.points)>m?{color:"red"}:{};return r.a.createElement(ee,{key:e.name,style:n,value:"".concat(e.name,"$$").concat(e.points,"$$").concat(e.role)},"[".concat(e.role,"] ").concat(e.name," - ").concat(e.points))}))),r.a.createElement(P.a,{value:h.qty,min:0,step:1,onChange:L("qty")}),!!m&&r.a.createElement(ae,{className:"showOnHover"},"Max. ".concat(Math.floor((m-s)/S)))),r.a.createElement(re,null,r.a.createElement(d.a,{value:O.name,style:{width:"50%"},onChange:F,showSearch:!0},y.map((function(e){var n=!!s&&s+parseInt(e.points)>m?{color:"red"}:{};return r.a.createElement(ee,{style:n,key:e.name,value:"".concat(e.name,"$$").concat(e.points)},"".concat(e.name," - ").concat(e.points))}))),r.a.createElement(T.a,{type:"primary",onClick:function(){var e=Object(f.a)({},h),n=Object(u.a)(e.weapons),t=e.weapons.findIndex((function(e){return e.name===O.name}));if(-1!=t)n[t].qty=n[t].qty+1,e.weapons=n;else{var a=Object(f.a)(Object(f.a)({},O),{},{qty:1});e.weapons=n.concat([a])}x(e)}},"Add")),h.weapons.map((function(e){return r.a.createElement(K,{id:e.name,equipment:e,changeQuantity:(n=e.name,function(e){var t=Object(f.a)({},h),a=Object(u.a)(t.weapons),r=a.findIndex((function(e){return e.name===n}));-1!=r&&(a[r].qty=e,t.weapons=a,x(t))}),selfDestruct:C(e.name)});var n})),r.a.createElement(te,null,"".concat(S,"pts - ").concat(ie[h.model.role]),r.a.createElement(T.a,{className:"showOnHover",shape:"circle",type:"danger",icon:r.a.createElement(J.a,null),size:"large",onClick:function(){n(h)}}))))}t(155);function oe(){var e=Object(l.a)(["\n    position: absolute;\n    right:2.5rem;\n    bottom:2.5rem;\n"]);return oe=function(){return e},e}function le(){var e=Object(l.a)(["\n    grid-row: 2/span 1;\n    background-color: white;\n    width:100%;\n    max-height: 100%;\n    position:relative;\n    padding: 2.5rem;\n\n    display:flex;\n    justify-content:flex-start;\n    align-items:flex-start;\n    flex-wrap:wrap;\n    overflow:auto;\n    \n    @media (max-width: 768px){\n        padding:1rem;\n    }\n"]);return le=function(){return e},e}var ue=s.a.div(le());s.a.div(oe());function se(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],i=n[1],c=Object(a.useState)(1),l=Object(o.a)(c,2),s=l[0],m=l[1],f=Object(a.useContext)(fe),d=f.data,p=f.factionData,v=f.dispatch;Object(a.useLayoutEffect)((function(){var e=JSON.parse(localStorage.getItem("ENLIST_ARMY_LIST"));if(e.army){var n=[];e.army.forEach((function(e,t){n.push({id:t,initialData:e})})),i(n),m(e.army.length+1)}}),[]);var h=p.currentFaction||p.factionList[0];return r.a.createElement(r.a.Fragment,null,r.a.createElement(_,null),r.a.createElement(ue,null,d&&d[h]&&t.map((function(e){return console.log(e.id),r.a.createElement(ce,{key:e.id,initialData:e.initialData,selfDestruct:(n=e.id,function(e){var a=t.filter((function(e){return e.id!==n}));i(a),v({type:"remove",old:e})}),factionData:d[h]});var n}))),r.a.createElement(k,{addItem:function(e){m(s+1);var n={id:s,initialData:e};i([].concat(Object(u.a)(t),[n]))}}))}function me(){var e=Object(l.a)(["\n  width:100%;\n  height: 99.9vh;\n  display: grid;\n  grid-template-rows: 5rem 1fr 5rem;\n  grid-template-columns: 1fr;\n"]);return me=function(){return e},e}var fe=r.a.createContext(),de=s.a.div(me()),pe=function(e,n){function t(n){var t=!1;return e.filter((function(e){if(t)return!0;var a=!0;if(e.qty===n.qty&&n.model.name===e.model.name){var r=n.weapons,i=e.weapons;if(r.length==i.length)0===r.filter((function(e){return!i.find((function(n){return n.name===e.name}))})).length&&(a=!1)}return a||(t=!0),a}))}var a=n.old;switch(n.type){case"update":return t(a).concat(n.new);case"remove":return t(a)}return"error"};var ve=function(){var e=Object(a.useState)({}),n=Object(o.a)(e,2),t=n[0],i=n[1],c=Object(a.useReducer)(pe,[]),l=Object(o.a)(c,2),u=l[0],s=l[1],m=Object(a.useState)({currentFaction:"",factionList:[]}),f=Object(o.a)(m,2),d=f[0],p=f[1],v=Object(a.useState)(null),h=Object(o.a)(v,2),b=h[0],g=h[1];Object(a.useEffect)((function(){var e=JSON.parse(localStorage.getItem("ENLIST_ARMY_LIST"));fetch("https://raw.githubusercontent.com/Brymo/Enlist/master/public/Data.json").then((function(e){return e.json()})).then((function(n){i(n);var t=Object.keys(n);p({currentFaction:e.faction||t[0],factionList:t,factionSetter:p}),g(e.pointLimit)}))}),[]);var w=u.reduce((function(e,n){return e+n.total}),0);return r.a.createElement(r.a.Fragment,null,r.a.createElement(fe.Provider,{value:{data:t,factionData:d,army:u,limiter:{value:b,setter:g},total:w,dispatch:s}},r.a.createElement(de,null,r.a.createElement(se,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ve,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[106,1,2]]]);
//# sourceMappingURL=main.28275ef3.chunk.js.map