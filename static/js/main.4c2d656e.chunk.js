(this.webpackJsonpenlist=this.webpackJsonpenlist||[]).push([[0],{127:function(e,n,t){},137:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(10),o=t.n(c),i=(t(97),t(16)),u=t(11),l=(t(98),t(19)),s=t(12),m=t(138),f=m.a.Option;function d(){var e=Object(a.useContext)(_).factionData,n=e.currentFaction,t=e.factionList,c=e.factionSetter;return r.a.createElement("div",{style:{minWidth:"10rem",width:"20%"}},r.a.createElement(m.a,{value:n,style:{minWidth:"10rem",width:"100%"},onChange:function(e){var n={currentFaction:e,factionList:Object(l.a)(t),factionSetter:c};n.currentFaction=e,console.log(n),c(n)},showSearch:!0},t.map((function(e){return r.a.createElement(f,{key:e,value:e},e)}))))}function p(){var e=Object(u.a)(["\n    width: 50vw;\n    background-color: #1890ff;\n    margin: -2.5rem;\n    height:5rem;\n    display:flex;\n    align-items:center;\n    padding-left: 2.5rem;\n    cursor: pointer;\n    transition: padding-left 0.2s ease-out;\n\n    &:hover{\n        padding-left: 2.8rem;\n    }\n\n"]);return p=function(){return e},e}function v(){var e=Object(u.a)(["\n\n    grid-row: 2/span 1;\n\n    width:100%;\n    height: 5rem;\n    display:flex;\n    justify-content:space-between;\n    align-items: center;\n    border-top: 1px solid grey ;\n    padding: 0 2.5rem;\n    font-size: 2.5rem;\n    font-weight:bold;\n"]);return v=function(){return e},e}var h=s.a.div(v()),b=s.a.div(p());function g(e){var n=Object(a.useContext)(_),t=n.army,c=n.factionData;Object(a.useLayoutEffect)((function(){setTimeout((function(){var e={army:Object(l.a)(t),faction:c.currentFaction};console.log(e),localStorage.setItem("ENLIST_ARMY_LIST",JSON.stringify(e))}),0)}),[t,c]);var o=t.reduce((function(e,n){return e+n.total}),0);return r.a.createElement(h,null,"Total: ".concat(o,"pts"),r.a.createElement(d,null),r.a.createElement(b,{onClick:function(){e.addItem()}},"Add + "))}var w=t(26),O=t(142),y=(t(127),t(139)),j=t(141),E=t(143);function S(){var e=Object(u.a)(["\n    background-color: lightgray;\n    width:100%;\n    margin: 0.25rem;\n    padding:0.5rem;\n\n    font-weight:bold;\n    display:flex;\n    justify-content:space-between;\n"]);return S=function(){return e},e}var x=s.a.span(S());function I(e){var n=e.equipment,t=e.selfDestruct,a=e.changeQuantity;return r.a.createElement(x,{className:"strip"},r.a.createElement(y.a,{value:n.qty,min:0,onChange:a}),"".concat(n.name," - ").concat(n.points),r.a.createElement(j.a,{className:"showOnHover",size:"small",shape:"circle",type:"danger",icon:r.a.createElement(E.a,null),onClick:t}))}function D(){var e=Object(u.a)(["\n    display:flex;\n    justify-content:flex-start;\n    align-items:center;\n    width:100%;\n    font-size: 2.5rem;\n    font-weight:bold;\n"]);return D=function(){return e},e}function k(){var e=Object(u.a)(["\n    display:flex;\n    justify-content:space-between;\n    align-items:center;\n    width:100%;\n    font-size: 2.5rem;\n    font-weight:bold;\n"]);return k=function(){return e},e}function C(){var e=Object(u.a)(["\n    width: 25rem;\n    min-height:13rem;\n    border-radius:1.25rem;\n    box-shadow: 0 0.1rem 0.2rem 0.2rem lightgrey;\n    padding:1.25rem;\n\n    display:flex;\n    flex-direction: column;\n    align-items:center;\n    justify-content:space-between;\n\n    margin:0.5rem;\n"]);return C=function(){return e},e}var q=m.a.Option,N=s.a.div(C()),L=s.a.span(k()),A=s.a.span(D());function T(e){var n=e.selfDestruct,t=e.factionData,c=e.initialData,o=Object(a.useContext)(_).dispatch,u=Object(a.useState)({qty:1,model:{name:"",points:0},weapons:[],total:0}),s=Object(i.a)(u,2),f=s[0],d=s[1],p=Object(a.useState)({name:"",points:0}),v=Object(i.a)(p,2),h=v[0],b=v[1],g=Object(a.useMemo)((function(){return t.UNITS.concat(t["NAMED CHARS"]||[])}),[t]),E=Object(a.useMemo)((function(){return t["RANGED WEAPONS"].concat(t["MELEE WEAPONS"]).concat(t["OTHER WARGEAR"])}),[t]);function S(e){o({type:"update",old:f,new:e}),d(e)}var x=(f.weapons.reduce((function(e,n){return e+parseInt(n.points)*n.qty}),0)+f.model.points)*f.qty;Object(a.useEffect)((function(){var e=Object(w.a)({},f);e.total=x,S(e)}),[x]),Object(a.useEffect)((function(){if(c){S(c);var e=c.weapons[0]?c.weapons[0].name:E[0].name,n=c.weapons[0]?c.weapons[0].name:E[0].name;b({name:e,points:n})}else{var t=parseInt(g[0].points);S({qty:1,model:{name:g[0].name,points:t},weapons:[],total:t}),b({name:E[0].name,points:E[0].points})}}),[t]);var D=function(e){return function(n){var t=Object(w.a)({},f);t[e]=n,S(t)}},k=Object(a.useCallback)((function(e){var n=e.split("$$"),t=Object(i.a)(n,2),a=t[0],r=t[1],c={name:a,points:parseInt(r)};b(c)}),[]),C=function(e){return function(){var n=Object(w.a)({},f),t=Object(l.a)(n.weapons),a=t.findIndex((function(n){return n.name===e})),r=t.filter((function(e,n){return n!=a}));n.weapons=r,S(n)}};return r.a.createElement("div",{className:"unitCard"},r.a.createElement(N,null,r.a.createElement(A,null,r.a.createElement(m.a,{value:f.model.name,style:{width:"50%"},onChange:function(e){var n=e.split("$$"),t=Object(i.a)(n,2),a=t[0],r=t[1],c={name:a,points:parseInt(r)};D("model")(c)},showSearch:!0},g.map((function(e){return r.a.createElement(q,{key:e.name,value:"".concat(e.name,"$$").concat(e.points)},"".concat(e.name," - ").concat(e.points))}))),r.a.createElement(y.a,{value:f.qty,min:0,step:1,onChange:D("qty")})),r.a.createElement(A,null,r.a.createElement(m.a,{value:h.name,style:{width:"50%"},onChange:k,showSearch:!0},E.map((function(e){return r.a.createElement(q,{key:e.name,value:"".concat(e.name,"$$").concat(e.points)},"".concat(e.name," - ").concat(e.points))}))),r.a.createElement(j.a,{type:"primary",onClick:function(){var e=Object(w.a)({},f),n=Object(l.a)(e.weapons),t=e.weapons.findIndex((function(e){return e.name===h.name}));if(-1!=t)n[t].qty=n[t].qty+1,e.weapons=n;else{var a=Object(w.a)(Object(w.a)({},h),{},{qty:1});e.weapons=n.concat([a])}S(e)}},"Add")),f.weapons.map((function(e){return r.a.createElement(I,{id:e.name,equipment:e,changeQuantity:(n=e.name,function(e){var t=Object(w.a)({},f),a=Object(l.a)(t.weapons),r=a.findIndex((function(e){return e.name===n}));-1!=r&&(a[r].qty=e,t.weapons=a,S(t))}),selfDestruct:C(e.name)});var n})),r.a.createElement(L,null,"".concat(x,"pts"),r.a.createElement(j.a,{className:"showOnHover",shape:"circle",type:"danger",icon:r.a.createElement(O.a,null),size:"large",onClick:function(){n(f)}}))))}t(136);function F(){var e=Object(u.a)(["\n    position: absolute;\n    right:2.5rem;\n    bottom:2.5rem;\n"]);return F=function(){return e},e}function R(){var e=Object(u.a)(["\n    grid-row: 1/span 1;\n    background-color: white;\n    width:100%;\n    max-height: 100%;\n    position:relative;\n    padding: 2.5rem;\n\n    display:flex;\n    justify-content:flex-start;\n    align-items:flex-start;\n    flex-wrap:wrap;\n    overflow:auto;\n    \n"]);return R=function(){return e},e}var $=s.a.div(R());s.a.div(F());function M(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)(1),u=Object(i.a)(o,2),s=u[0],m=u[1],f=Object(a.useContext)(_),d=f.data,p=f.factionData,v=f.dispatch;Object(a.useLayoutEffect)((function(){var e=JSON.parse(localStorage.getItem("ENLIST_ARMY_LIST"));if(e.army){var n=[];e.army.forEach((function(e,t){n.push({id:t,initialData:e})})),c(n),m(e.army.length+1)}}),[]);var h=p.currentFaction||p.factionList[0];return r.a.createElement(r.a.Fragment,null,r.a.createElement($,null,d&&d[h]&&t.map((function(e){return console.log(e.id),r.a.createElement(T,{key:e.id,initialData:e.initialData,selfDestruct:(n=e.id,function(e){var a=t.filter((function(e){return e.id!==n}));c(a),v({type:"remove",old:e})}),factionData:d[h]});var n}))),r.a.createElement(g,{addItem:function(e){m(s+1);var n={id:s,initialData:e};c([].concat(Object(l.a)(t),[n]))}}))}function W(){var e=Object(u.a)(["\n  width:100%;\n  height: 99.9vh;\n  display: grid;\n  grid-template-rows: 1fr 5rem;\n  grid-template-columns: 1fr;\n"]);return W=function(){return e},e}var _=r.a.createContext(),z=s.a.div(W()),J=function(e,n){function t(n){var t=!1;return e.filter((function(e){if(t)return!0;var a=!0;if(e.qty===n.qty&&n.model.name===e.model.name){var r=n.weapons,c=e.weapons;if(r.length==c.length)0===r.filter((function(e){return!c.find((function(n){return n.name===e.name}))})).length&&(a=!1)}return a||(t=!0),a}))}var a=n.old;switch(n.type){case"update":return t(a).concat(n.new);case"remove":return t(a)}return"error"};var H=function(){var e=Object(a.useState)({}),n=Object(i.a)(e,2),t=n[0],c=n[1],o=Object(a.useReducer)(J,[]),u=Object(i.a)(o,2),l=u[0],s=u[1],m=Object(a.useState)({currentFaction:"",factionList:[]}),f=Object(i.a)(m,2),d=f[0],p=f[1];return Object(a.useEffect)((function(){var e=JSON.parse(localStorage.getItem("ENLIST_ARMY_LIST"));console.log(e),fetch("https://raw.githubusercontent.com/Brymo/Enlist/master/public/Data.json").then((function(e){return e.json()})).then((function(n){c(n);var t=Object.keys(n);p({currentFaction:e.faction||t[0],factionList:t,factionSetter:p})}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(_.Provider,{value:{data:t,factionData:d,army:l,dispatch:s}},r.a.createElement(z,null,r.a.createElement(M,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},92:function(e,n,t){e.exports=t(137)},97:function(e,n,t){},98:function(e,n,t){}},[[92,1,2]]]);
//# sourceMappingURL=main.4c2d656e.chunk.js.map